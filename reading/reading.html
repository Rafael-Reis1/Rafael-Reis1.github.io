<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Gerenciador de Leitura - Organize seus livros e acompanhe seu progresso">
    <title>Gerenciador de Leitura</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Outfit:wght@400;500;600;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="style.css?v=1501261604">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <script src="https://cdn.jsdelivr.net/npm/flatpickr/dist/l10n/pt.js"></script>
    <link rel="icon" type="image/svg+xml" href="../favicon.svg?v=1501261604">

    <link rel="manifest" href="manifest.json?v=1501261604">
    <meta name="theme-color" content="#0f0c29">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Leitura">
    <link rel="apple-touch-icon" href="icon-maskable.png?v=1501261604">
    <meta name="mobile-web-app-capable" content="yes">

    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
    <script>
        window.onerror = function (msg, url, line, col, error) {
            alert("Error: " + msg + "\nurl: " + url + "\nline: " + line + "\ncol: " + col + "\nerror: " + error);
            return false;
        };
    </script>
    <script src="app.js?v=1501261604" defer></script>
</head>

<body>
    <div class="app-container">
        <header class="header">
            <div class="header-left">
                <button class="btn-menu" id="btnMenu" title="Menu">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="3" y1="6" x2="21" y2="6"></line>
                        <line x1="3" y1="12" x2="21" y2="12"></line>
                        <line x1="3" y1="18" x2="21" y2="18"></line>
                    </svg>
                </button>
                <a href="../index.html" class="btn-back" title="Voltar ao Portfolio">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M19 12H5M12 19l-7-7 7-7" />
                    </svg>
                </a>
                <h1>üìö Minha Biblioteca <span id="currentSectionLabel"></span></h1>
            </div>
            <div class="header-actions">
                <button id="installAppBtn" class="btn btn-icon btn-install" title="Instalar App" style="display: none;">
                    <svg width="20" height="20" viewBox="0 0 16 16" fill="currentColor">
                        <path
                            d="M4.406 1.342A5.53 5.53 0 0 1 8 0c2.69 0 4.923 2 5.166 4.579C14.758 4.804 16 6.137 16 7.773 16 9.648 14.545 11 12.68 11H10a.5.5 0 0 1 0-1h2.688C13.979 10 15 8.988 15 7.773c0-1.216-1.02-2.228-2.313-2.228h-.5v-.5C12.188 2.825 10.328 1 8 1a4.53 4.53 0 0 0-2.941 1.1c-.757.652-1.153 1.438-1.153 2.055v.448l-.445.049C2.064 4.805 1 5.952 1 7.318 1 8.785 2.23 10 3.781 10H6a.5.5 0 0 1 0 1H3.781C1.708 11 0 9.366 0 7.318c0-1.763 1.266-3.223 2.942-3.593.143-.863.698-1.723 1.464-2.383z" />
                        <path
                            d="M7.646 15.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 14.293V5.5a.5.5 0 0 0-1 0v8.793l-2.146-2.147a.5.5 0 0 0-.708.708l3 3z" />
                    </svg>
                    <span>Instalar App</span>
                </button>
                <button id="btnLogin" class="btn btn-secondary" title="Login com Google" style="display: none;">
                    <svg width="18" height="18" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"
                        fill="currentColor">
                        <path
                            d="M12.48 10.92v3.28h7.84c-.24 1.84-.853 3.187-1.787 4.133-1.147 1.147-2.933 2.4-6.053 2.4-4.827 0-8.6-3.893-8.6-8.72s3.773-8.72 8.6-8.72c2.6 0 4.507 1.027 5.907 2.347l2.307-2.307C18.747 1.44 16.133 0 12.48 0 5.867 0 .533 5.347.533 12S5.867 24 12.48 24c3.44 0 6.013-1.133 8.013-3.227 2.04-2.053 2.627-5.067 2.627-7.427 0-.747-.054-1.467-.16-2.147H12.48z" />
                    </svg>
                    <span>Google Login</span>
                </button>
                <div id="userInfo" class="user-info" style="display: none;">
                    <img id="userAvatar" src="" alt="User" class="user-avatar" title="Clique para op√ß√µes">
                    <div id="userDropdown" class="user-dropdown">
                        <div class="dropdown-header">
                            <span id="userName" class="user-name">Usu√°rio</span>
                            <span id="userEmail" class="user-email">email@exemplo.com</span>
                        </div>
                        <div class="dropdown-divider"></div>
                        <button id="btnExportMenu" class="dropdown-item">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2">
                                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                                <polyline points="7 10 12 15 17 10"></polyline>
                                <line x1="12" y1="15" x2="12" y2="3"></line>
                            </svg>
                            Exportar Backup
                        </button>
                        <button id="btnImportMenu" class="dropdown-item">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2">
                                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                                <polyline points="17 8 12 3 7 8"></polyline>
                                <line x1="12" y1="3" x2="12" y2="15"></line>
                            </svg>
                            Importar Backup
                        </button>
                        <div class="dropdown-divider"></div>
                        <button id="btnLogout" class="dropdown-item danger">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2">
                                <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
                                <polyline points="16 17 21 12 16 7"></polyline>
                                <line x1="21" y1="12" x2="9" y2="12"></line>
                            </svg>
                            Sair
                        </button>
                    </div>
                </div>
                <input type="file" id="fileInput" accept=".json" hidden>
            </div>
        </header>

        <main class="main-content">
            <div class="sidebar-overlay" id="sidebarOverlay"></div>
            <aside class="sidebar" id="sidebar">
                <div class="sidebar-header">
                    <h2>Menu</h2>
                    <button class="btn-close-sidebar" id="btnCloseSidebar">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <line x1="18" y1="6" x2="6" y2="18"></line>
                            <line x1="6" y1="6" x2="18" y2="18"></line>
                        </svg>
                    </button>
                </div>
                <nav class="sidebar-nav">
                    <div class="nav-group">
                        <h3 class="nav-title">Estat√≠sticas</h3>
                        <div class="stats-card" id="paginometerCard">
                            <div
                                style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 0.5rem;">
                                <span style="font-size: 0.9rem; color: var(--text-secondary);">Pagin√¥metro</span>
                                <div
                                    style="width: 32px; height: 32px; border-radius: 8px; background: rgba(255,255,255,0.1); display: flex; align-items: center; justify-content: center; color: var(--accent-color);">
                                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                        stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                        <path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"></path>
                                        <path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"></path>
                                    </svg>
                                </div>
                            </div>
                            <div class="stats-value" id="total-pages-read"
                                style="font-size: 1.5rem; font-weight: 700; color: white;">0</div>
                            <div class="stats-label" style="font-size: 0.8rem; color: var(--text-muted);">P√°ginas lidas
                            </div>
                        </div>
                    </div>

                    <div class="nav-group">
                        <h3 class="nav-title">Estado de Leitura</h3>
                        <a href="#" class="nav-item active" data-filter="all">
                            <div class="nav-icon icon-all">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M17 3H7c-1.1 0-1.99.9-1.99 2L5 21l7-3 7 3V5c0-1.1-.9-2-2-2z" />
                                </svg>
                            </div>
                            <span class="nav-label">Todos</span>
                            <span class="nav-count" id="count-all">0</span>
                        </a>
                        <a href="#" class="nav-item" data-filter="read">
                            <div class="nav-icon icon-read">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M17 3H7c-1.1 0-1.99.9-1.99 2L5 21l7-3 7 3V5c0-1.1-.9-2-2-2z" />
                                </svg>
                            </div>
                            <span class="nav-label">Lido</span>
                            <span class="nav-count" id="count-read">0</span>
                        </a>
                        <a href="#" class="nav-item" data-filter="reading">
                            <div class="nav-icon icon-reading">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M17 3H7c-1.1 0-1.99.9-1.99 2L5 21l7-3 7 3V5c0-1.1-.9-2-2-2z" />
                                </svg>
                            </div>
                            <span class="nav-label">Lendo</span>
                            <span class="nav-count" id="count-reading">0</span>
                        </a>
                        <a href="#" class="nav-item" data-filter="want-to-read">
                            <div class="nav-icon icon-want">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M17 3H7c-1.1 0-1.99.9-1.99 2L5 21l7-3 7 3V5c0-1.1-.9-2-2-2z" />
                                </svg>
                            </div>
                            <span class="nav-label">Quero ler</span>
                            <span class="nav-count" id="count-want">0</span>
                        </a>
                        <a href="#" class="nav-item" data-filter="re-reading">
                            <div class="nav-icon icon-reread">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M17 3H7c-1.1 0-1.99.9-1.99 2L5 21l7-3 7 3V5c0-1.1-.9-2-2-2z" />
                                </svg>
                            </div>
                            <span class="nav-label">Relendo</span>
                            <span class="nav-count" id="count-rereading">0</span>
                        </a>
                        <a href="#" class="nav-item" data-filter="abandoned">
                            <div class="nav-icon icon-abandoned">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M17 3H7c-1.1 0-1.99.9-1.99 2L5 21l7-3 7 3V5c0-1.1-.9-2-2-2z" />
                                </svg>
                            </div>
                            <span class="nav-label">Abandonei</span>
                            <span class="nav-count" id="count-abandoned">0</span>
                        </a>
                    </div>


                    <div class="nav-group">
                        <h3 class="nav-title">Cole√ß√µes</h3>
                        <a href="#" class="nav-item" data-filter="favorite">
                            <div class="nav-icon icon-favorite">
                                <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                                    <path
                                        d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z" />
                                </svg>
                            </div>
                            <span class="nav-label">Favorito</span>
                            <span class="nav-count" id="count-favorite">0</span>
                        </a>
                        <a href="#" class="nav-item" data-filter="desired">
                            <div class="nav-icon icon-desired">
                                <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                                    <path
                                        d="M20 6h-2.18c.11-.31.18-.65.18-1 0-1.66-1.34-3-3-3-1.62 0-2.98 1.28-3 2.88l-.01-.01C11.98 3.28 10.62 2 9 2c-1.66 0-3 1.34-3 3 0 .35.07.69.18 1H2v13c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V6zm-8-2c.55 0 1 .45 1 1s-.45 1-1 1h-2.12c.07-.31.12-.64.12-1 0-.55.45-1 1-1zm-6 1c0-.55.45-1 1-1s1 .45 1 1c0 .36.05.69.12 1H8c-.55 0-1-.45-1-1zm13 13H4v-2h15v2zm0-5H4V8h5.08L7 10.83l1.54 1.28 2.45-3.11H13l2.45 3.11 1.54-1.28L14.92 8H20v6z" />
                                </svg>
                            </div>
                            <span class="nav-label">Desejado</span>
                            <span class="nav-count" id="count-desired">0</span>
                        </a>
                        <a href="#" class="nav-item" data-filter="borrowed">
                            <div class="nav-icon icon-borrowed">
                                <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z" />
                                </svg>
                            </div>
                            <span class="nav-label">Emprestado</span>
                            <span class="nav-count" id="count-borrowed">0</span>
                        </a>
                        <a href="#" class="nav-item" data-filter="physical">
                            <div class="nav-icon icon-physical">
                                <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                                    <path
                                        d="M4 6H2v14c0 1.1.9 2 2 2h14v-2H4V6zm16-4H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-1 9H9V9h10v2zm-4 4H9v-2h5v2zm4-8H9V5h10v2z" />
                                </svg>
                            </div>
                            <span class="nav-label">F√≠sico</span>
                            <span class="nav-count" id="count-physical">0</span>
                        </a>
                        <a href="#" class="nav-item" data-filter="owned">
                            <div class="nav-icon icon-owned">
                                <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                                    <path
                                        d="M20 8h-3V4H7v4H4c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zM9 6h6v2H9V6zm11 14H4v-8h16v8z" />
                                </svg>
                            </div>
                            <span class="nav-label">Tenho</span>
                            <span class="nav-count" id="count-owned">0</span>
                        </a>
                        <a href="#" class="nav-item" data-filter="lent">
                            <div class="nav-icon icon-lent">
                                <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M12 4l-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z" />
                                </svg>
                            </div>
                            <span class="nav-label">Emprestei</span>
                            <span class="nav-count" id="count-lent">0</span>
                        </a>
                        <a href="#" class="nav-item" data-filter="target">
                            <div class="nav-icon icon-target">
                                <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                                    <path
                                        d="M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm3.5-8c0 1.93-1.57 3.5-3.5 3.5s-3.5-1.57-3.5-3.5 1.57-3.5 3.5-3.5 3.5 1.57 3.5 3.5z" />
                                </svg>
                            </div>
                            <span class="nav-label">Meta de leitura</span>
                            <span class="nav-count" id="count-target">0</span>
                        </a>
                        <a href="#" class="nav-item" data-filter="ebook">
                            <div class="nav-icon icon-ebook">
                                <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                                    <path
                                        d="M18 2H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM9 4h6v2H9V4zm9 16H6V8h12v12z" />
                                </svg>
                            </div>
                            <span class="nav-label">Ebook / Digital</span>
                            <span class="nav-count" id="count-ebook">0</span>
                        </a>
                        <a href="#" class="nav-item" data-filter="audiobook">
                            <div class="nav-icon icon-audiobook">
                                <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                                    <path
                                        d="M12 3c-4.97 0-9 4.03-9 9v7c0 1.66 1.34 3 3 3h3v-8H5v-2c0-3.87 3.13-7 7-7s7 3.13 7 7v2h-4v8h3c1.66 0 3-1.34 3-3v-7c0-4.97-4.03-9-9-9z" />
                                </svg>
                            </div>
                            <span class="nav-label">AudioBook</span>
                            <span class="nav-count" id="count-audiobook">0</span>
                        </a>
                    </div>

                    <div class="sidebar-footer-mobile">
                        <a href="../index.html" class="nav-item back-link">
                            <div class="nav-icon">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                    stroke-width="2">
                                    <path d="M19 12H5M12 19l-7-7 7-7" />
                                </svg>
                            </div>
                            <span class="nav-label">Voltar ao Portfolio</span>
                        </a>
                    </div>
                </nav>
            </aside>

            <section class="library-area">
                <div class="library-toolbar">
                    <div class="toolbar-left">
                        <span class="results-count" id="resultsCount">0 encontrados</span>
                    </div>

                    <div class="toolbar-center">
                        <div class="year-filters">
                        </div>
                    </div>

                    <div class="toolbar-right">
                        <div class="search-wrapper">
                            <svg class="search-icon" width="16" height="16" viewBox="0 0 24 24" fill="none"
                                stroke="currentColor" stroke-width="2">
                                <circle cx="11" cy="11" r="8"></circle>
                                <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                            </svg>
                            <input type="text" id="bookSearch" class="search-input" placeholder="Buscar livro..."
                                autocomplete="off">
                        </div>
                        <div class="sort-dropdown-container">
                            <button id="btnSort" class="btn btn-secondary btn-icon" title="Organizar">
                                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                    stroke-width="2">
                                    <path d="M7 20V4" />
                                    <path d="M3 8l4-4 4 4" />
                                    <path d="M17 4v16" />
                                    <path d="M13 16l4 4 4-4" />
                                </svg>
                            </button>
                            <div id="sortDropdown" class="dropdown-menu">
                                <div class="dropdown-header">Ordenar por</div>
                                <button class="dropdown-item active" data-sort="recent">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                        stroke-width="2">
                                        <circle cx="12" cy="12" r="10"></circle>
                                        <polyline points="12 6 12 12 16 14"></polyline>
                                    </svg>
                                    Recentes
                                </button>
                                <button class="dropdown-item" data-sort="title">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                        stroke-width="2">
                                        <polyline points="15 14 20 9 15 4"></polyline>
                                        <path d="M4 20v-7a4 4 0 0 1 4-4h12"></path>
                                    </svg>
                                    T√≠tulo
                                </button>
                                <button class="dropdown-item" data-sort="author">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                        stroke-width="2">
                                        <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                                        <circle cx="12" cy="7" r="4"></circle>
                                    </svg>
                                    Autor
                                </button>
                                <button class="dropdown-item" data-sort="read-date">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                        stroke-width="2">
                                        <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                                        <line x1="16" y1="2" x2="16" y2="6"></line>
                                        <line x1="8" y1="2" x2="8" y2="6"></line>
                                        <line x1="3" y1="10" x2="21" y2="10"></line>
                                    </svg>
                                    Data de Leitura
                                </button>
                                <button class="dropdown-item" data-sort="rating">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                        stroke-width="2">
                                        <polygon
                                            points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2">
                                        </polygon>
                                    </svg>
                                    Avalia√ß√£o
                                </button>
                            </div>
                        </div>
                        <button id="btnAddBook" class="btn btn-primary" title="Adicionar Livro">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2">
                                <line x1="12" y1="5" x2="12" y2="19"></line>
                                <line x1="5" y1="12" x2="19" y2="12"></line>
                            </svg>
                            <span>Adicionar</span>
                        </button>
                    </div>
                </div>

                <div class="scrollable-content">
                    <div class="books-grid" id="booksGrid">
                        <div class="empty-state">
                            <p>Selecione uma categoria ou adicione um novo livro.</p>
                        </div>
                    </div>

                    <div id="paginationControls" class="pagination-controls" style="display: none;">
                        <button id="btnPrevPage" class="btn btn-secondary btn-sm" disabled>
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2">
                                <polyline points="15 18 9 12 15 6"></polyline>
                            </svg>
                            Anterior
                        </button>
                        <span id="pageInfo" class="page-info">P√°gina 1</span>
                        <button id="btnNextPage" class="btn btn-secondary btn-sm">
                            Pr√≥ximo
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2">
                                <polyline points="9 18 15 12 9 6"></polyline>
                            </svg>
                        </button>
                    </div>
                </div>
            </section>

        </main>
    </div>

    <div id="bookModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modalTitle">Adicionar Livro</h3>
                <div class="modal-header-actions">
                    <button type="button" class="modal-action-btn" id="btnOpenHistoryFromModal"
                        title="Hist√≥rico de Leitura" style="display: none;">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <circle cx="12" cy="12" r="10"></circle>
                            <polyline points="12 6 12 12 16 14"></polyline>
                        </svg>
                    </button>
                    <button class="modal-close" id="closeBookModal">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <line x1="18" y1="6" x2="6" y2="18"></line>
                            <line x1="6" y1="6" x2="18" y2="18"></line>
                        </svg>
                    </button>
                </div>
            </div>
            <form id="bookForm" autocomplete="off">
                <div class="modal-body">
                    <input type="hidden" id="bookId">

                    <div class="form-row search-row">
                        <div class="form-group full-width api-search-group">
                            <label for="apiSearch">
                                <span>‚ú® Localizar Livro Automaticamente</span>
                            </label>
                            <div class="search-input-wrapper">
                                <input type="text" id="apiSearch" placeholder="Digite o nome do livro ou autor...">
                                <div class="search-loader" id="searchLoader"></div>
                            </div>
                            <div class="api-results" id="apiResults"></div>
                        </div>
                    </div>

                    <div class="form-divider"><span>Ou preencha manualmente</span></div>

                    <div class="form-row">
                        <div class="form-group full-width">
                            <label for="bookTitle">T√≠tulo</label>
                            <input type="text" id="bookTitle" required placeholder="Nome do livro">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group full-width">
                            <label for="bookAuthor">Autor</label>
                            <input type="text" id="bookAuthor" required placeholder="Nome do autor">
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="bookPages">P√°ginas</label>
                            <input type="number" id="bookPages" placeholder="Total">
                        </div>
                        <div class="form-group" id="groupReadDate" style="display: none;">
                            <label for="bookReadDate">Data de Leitura</label>
                            <input type="text" id="bookReadDate" class="flatpickr-input" placeholder="DD/MM/AAAA">
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group" style="flex: 1;">
                            <label for="bookStatus">Status</label>
                            <div class="custom-select-container">
                                <input type="hidden" id="bookStatus" value="read">
                                <button type="button" class="select-trigger" id="statusTrigger">
                                    <div style="display: flex; align-items: center;">
                                        <span class="status-indicator status-read" id="triggerIndicator"></span>
                                        <span id="triggerText">Lido</span>
                                    </div>
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                        stroke-width="2">
                                        <path d="M6 9l6 6 6-6" />
                                    </svg>
                                </button>
                                <div class="custom-options" id="statusOptions">
                                    <div class="custom-option selected" data-value="read" data-label="Lido"
                                        data-class="status-read">
                                        <span class="status-indicator status-read"></span> Lido
                                    </div>
                                    <div class="custom-option" data-value="reading" data-label="Lendo"
                                        data-class="status-reading">
                                        <span class="status-indicator status-reading"></span> Lendo
                                    </div>
                                    <div class="custom-option" data-value="want-to-read" data-label="Quero Ler"
                                        data-class="status-want">
                                        <span class="status-indicator status-want"></span> Quero Ler
                                    </div>
                                    <div class="custom-option" data-value="re-reading" data-label="Relendo"
                                        data-class="status-reread">
                                        <span class="status-indicator status-reread"></span> Relendo
                                    </div>
                                    <div class="custom-option" data-value="abandoned" data-label="Abandonei"
                                        data-class="status-abandoned">
                                        <span class="status-indicator status-abandoned"></span> Abandonei
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="form-group" id="groupRating" style="display: none; flex: 1;">
                            <label>Avalia√ß√£o</label>
                            <div class="star-rating-input" id="starRatingWidget">
                                <div class="stars-container">
                                    <svg class="star-icon" data-index="1" width="24" height="24" viewBox="0 0 24 24"
                                        fill="none" stroke="currentColor" stroke-width="2">
                                        <polygon
                                            points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2">
                                        </polygon>
                                    </svg>
                                    <svg class="star-icon" data-index="2" width="24" height="24" viewBox="0 0 24 24"
                                        fill="none" stroke="currentColor" stroke-width="2">
                                        <polygon
                                            points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2">
                                        </polygon>
                                    </svg>
                                    <svg class="star-icon" data-index="3" width="24" height="24" viewBox="0 0 24 24"
                                        fill="none" stroke="currentColor" stroke-width="2">
                                        <polygon
                                            points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2">
                                        </polygon>
                                    </svg>
                                    <svg class="star-icon" data-index="4" width="24" height="24" viewBox="0 0 24 24"
                                        fill="none" stroke="currentColor" stroke-width="2">
                                        <polygon
                                            points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2">
                                        </polygon>
                                    </svg>
                                    <svg class="star-icon" data-index="5" width="24" height="24" viewBox="0 0 24 24"
                                        fill="none" stroke="currentColor" stroke-width="2">
                                        <polygon
                                            points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2">
                                        </polygon>
                                    </svg>
                                </div>
                                <span class="rating-value" id="ratingValueDisplay">0.0</span>
                                <input type="hidden" id="bookRating" name="rating" value="0">
                            </div>
                        </div>
                    </div>

                    <div class="form-row" style="display: none;">
                        <div class="form-group full-width">
                            <label for="bookCover">Capa (URL)</label>
                            <input type="url" id="bookCover" placeholder="https://exemplo.com/capa.jpg">
                        </div>
                    </div>

                    <div class="form-row" id="groupGoalYear" style="display: none;">
                        <div class="form-group full-width">
                            <label for="bookGoalYear">Ano da Meta</label>
                            <input type="number" id="bookGoalYear" placeholder="Ano (opcional)" min="2000" max="2100">
                        </div>
                    </div>

                    <div class="form-group full-width">
                        <label>Tags</label>
                        <div class="tags-container">
                            <label class="tag-checkbox">
                                <input type="checkbox" name="tags" value="favorite">
                                <svg viewBox="0 0 24 24" fill="currentColor">
                                    <path
                                        d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z" />
                                </svg>
                                <span>Favorito</span>
                            </label>
                            <label class="tag-checkbox">
                                <input type="checkbox" name="tags" value="desired">
                                <svg viewBox="0 0 24 24" fill="currentColor">
                                    <path
                                        d="M20 6h-2.18c.11-.31.18-.65.18-1 0-1.66-1.34-3-3-3-1.62 0-2.98 1.28-3 2.88l-.01-.01C11.98 3.28 10.62 2 9 2c-1.66 0-3 1.34-3 3 0 .35.07.69.18 1H2v13c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V6zm-8-2c.55 0 1 .45 1 1s-.45 1-1 1h-2.12c.07-.31.12-.64.12-1 0-.55.45-1 1-1zm-6 1c0-.55.45-1 1-1s1 .45 1 1c0 .36.05.69.12 1H8c-.55 0-1-.45-1-1zm13 13H4v-2h15v2zm0-5H4V8h5.08L7 10.83l1.54 1.28 2.45-3.11H13l2.45 3.11 1.54-1.28L14.92 8H20v6z" />
                                </svg>
                                <span>Desejado</span>
                            </label>
                            <label class="tag-checkbox">
                                <input type="checkbox" name="tags" value="borrowed">
                                <svg viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z" />
                                </svg>
                                <span>Emprestado</span>
                            </label>
                            <label class="tag-checkbox">
                                <input type="checkbox" name="tags" value="physical">
                                <svg viewBox="0 0 24 24" fill="currentColor">
                                    <path
                                        d="M4 6H2v14c0 1.1.9 2 2 2h14v-2H4V6zm16-4H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-1 9H9V9h10v2zm-4 4H9v-2h5v2zm4-8H9V5h10v2z" />
                                </svg>
                                <span>F√≠sico</span>
                            </label>
                            <label class="tag-checkbox">
                                <input type="checkbox" name="tags" value="owned">
                                <svg viewBox="0 0 24 24" fill="currentColor">
                                    <path
                                        d="M20 8h-3V4H7v4H4c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zM9 6h6v2H9V6zm11 14H4v-8h16v8z" />
                                </svg>
                                <span>Tenho</span>
                            </label>
                            <label class="tag-checkbox">
                                <input type="checkbox" name="tags" value="lent">
                                <svg viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M12 4l-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z" />
                                </svg>
                                <span>Emprestei</span>
                            </label>
                            <label class="tag-checkbox">
                                <input type="checkbox" name="tags" value="target">
                                <svg viewBox="0 0 24 24" fill="currentColor">
                                    <path
                                        d="M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm3.5-8c0 1.93-1.57 3.5-3.5 3.5s-3.5-1.57-3.5-3.5 1.57-3.5 3.5-3.5 3.5 1.57 3.5 3.5z" />
                                </svg>
                                <span>Meta</span>
                            </label>
                            <label class="tag-checkbox">
                                <input type="checkbox" name="tags" value="ebook">
                                <svg viewBox="0 0 24 24" fill="currentColor">
                                    <path
                                        d="M18 2H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM9 4h6v2H9V4zm9 16H6V8h12v12z" />
                                </svg>
                                <span>Ebook</span>
                            </label>
                            <label class="tag-checkbox">
                                <input type="checkbox" name="tags" value="audiobook">
                                <svg viewBox="0 0 24 24" fill="currentColor">
                                    <path
                                        d="M12 3c-4.97 0-9 4.03-9 9v7c0 1.66 1.34 3 3 3h3v-8H5v-2c0-3.87 3.13-7 7-7s7 3.13 7 7v2h-4v8h3c1.66 0 3-1.34 3-3v-7c0-4.97-4.03-9-9-9z" />
                                </svg>
                                <span>AudioBook</span>
                            </label>
                        </div>
                    </div>
                </div>

                <div class="modal-actions">
                    <button type="button" class="btn btn-secondary" id="cancelBook">Cancelar</button>
                    <button type="submit" class="btn btn-primary">Salvar Livro</button>
                </div>
            </form>

        </div>
    </div>

    <div id="historyModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Hist√≥rico de Leitura</h3>
                <button class="modal-close" id="closeHistoryModal">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                        stroke-linecap="round" stroke-linejoin="round">
                        <line x1="18" y1="6" x2="6" y2="18"></line>
                        <line x1="6" y1="6" x2="18" y2="18"></line>
                    </svg>
                </button>
            </div>

            <form id="historyForm" autocomplete="off">
                <div class="modal-body">
                    <input type="hidden" id="historyBookId">
                    <input type="hidden" id="historyTotalPages">

                    <div class="book-progress-summary">
                        <div class="progress-info">
                            <span id="historyBookTitle" class="history-title">T√≠tulo do Livro</span>
                            <span id="historyProgressText" class="history-percent">0%</span>
                        </div>
                        <div class="progress-bar-container">
                            <div class="progress-bar-fill" id="historyProgressBar"></div>
                        </div>
                    </div>

                    <div class="form-row" style="align-items: center; margin-top: 1rem;">
                        <div class="form-group">
                            <label id="lblHistoryInput">P√°gina Atual</label>
                            <input type="number" id="newCurrentPage" class="form-input" min="0">
                        </div>

                        <div class="form-group" style="flex: 0 0 auto; margin-top: 1.5rem;">
                            <label class="tag-checkbox">
                                <input type="checkbox" id="isPercentage">
                                <span>√â porcentagem?</span>
                            </label>
                        </div>
                    </div>

                    <div class="history-log">
                        <h4>Registro de Leitura</h4>
                        <div id="historyList" class="history-list">
                        </div>
                    </div>
                </div>

                <div class="modal-actions">
                    <button type="button" class="btn btn-secondary"
                        onclick="document.getElementById('closeHistoryModal').click()">Cancelar</button>
                    <button type="submit" class="btn btn-primary">Salvar</button>
                </div>
            </form>
        </div>
    </div>

    <div id="deleteModal" class="modal delete-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Confirmar Exclus√£o</h3>
                <button class="modal-close" id="closeDeleteModal">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                        stroke-linecap="round" stroke-linejoin="round">
                        <line x1="18" y1="6" x2="6" y2="18"></line>
                        <line x1="6" y1="6" x2="18" y2="18"></line>
                    </svg>
                </button>
            </div>
            <div class="modal-body">
                <div class="delete-icon" style="font-size: 3rem; margin-bottom: 1rem;">üóëÔ∏è</div>
                <p id="deleteModalMessage">Tem certeza que deseja excluir?</p>
                <p class="text-muted" style="font-size: 0.9rem; margin-top: 0.5rem;">Esta a√ß√£o n√£o pode ser desfeita.
                </p>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" id="cancelDeleteBtn">Cancelar</button>
                <button class="btn btn-danger" id="confirmDeleteBtn">Excluir</button>
            </div>
        </div>
    </div>

    <div id="messageModal" class="modal message-modal">
        <div class="modal-content">
            <div class="modal-body">
                <div class="message-icon" id="messageIcon">üéâ</div>
                <h3 id="messageTitle" style="margin-bottom: 0.5rem;">T√≠tulo</h3>
                <p id="messageText" class="text-muted">Mensagem aqui</p>
            </div>
            <div class="modal-footer">
                <button class="btn btn-primary" id="messageOkBtn">OK</button>
            </div>
        </div>
    </div>

    <div id="statsModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Estat√≠sticas de Leitura</h2>
                <button type="button" class="modal-close" onclick="App.closeStatsModal()">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="18" y1="6" x2="6" y2="18"></line>
                        <line x1="6" y1="6" x2="18" y2="18"></line>
                    </svg>
                </button>
            </div>
            <div class="modal-body">
                <div id="statsContent" class="stats-container">
                </div>
            </div>
        </div>
    </div>
    <div id="periodDetailsModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="periodDetailsTitle">Livros Lidos</h3>
                <div class="modal-header-actions">
                    <button id="closePeriodDetailsModal" class="modal-close">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <line x1="18" y1="6" x2="6" y2="18"></line>
                            <line x1="6" y1="6" x2="18" y2="18"></line>
                        </svg>
                    </button>
                </div>
            </div>
            <div id="periodDetailsContent" class="modal-body">
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" id="btnClosePeriodDetails">Fechar</button>
            </div>
        </div>
    </div>

    <div id="loginOverlay" class="login-overlay">
        <div class="login-card">
            <div id="authLoading" class="auth-loading">
                <div class="spinner"></div>
                <p>Carregando p√°gina...</p>
            </div>
            <div id="authContent" class="auth-content" style="display: none;">
                <div class="login-icon">
                    <svg width="60" height="60" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                        stroke-width="1.5">
                        <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20" />
                        <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z" />
                    </svg>
                </div>
                <h2>Bem-vindo √† Minha Biblioteca</h2>
                <p>Para sincronizar seus livros e leituras em todos os dispositivos com seguran√ßa, √© necess√°rio fazer
                    login com sua conta Google.</p>
                <p class="login-note">Fa√ßa login com sua conta Google para acessar seus dados.</p>
                <button id="btnLoginOverlay" class="btn btn-primary btn-lg">
                    <svg width="20" height="20" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"
                        fill="currentColor">
                        <path
                            d="M12.48 10.92v3.28h7.84c-.24 1.84-.853 3.187-1.787 4.133-1.147 1.147-2.933 2.4-6.053 2.4-4.827 0-8.6-3.893-8.6-8.72s3.773-8.72 8.6-8.72c2.6 0 4.507 1.027 5.907 2.347l2.307-2.307C18.747 1.44 16.133 0 12.48 0 5.867 0 .533 5.347.533 12S5.867 24 12.48 24c3.44 0 6.013-1.133 8.013-3.227 2.04-2.053 2.627-5.067 2.627-7.427 0-.747-.054-1.467-.16-2.147H12.48z" />
                    </svg>
                    Fazer Login com Google
                </button>
                <a href="../index.html" class="btn btn-text-only"
                    style="color: var(--text-muted); text-decoration: none; font-size: 0.9rem;">
                    Voltar para o Portfolio
                </a>
            </div>
        </div>
    </div>
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('sw.js');
            });
        }
    </script>
</body>

</html>