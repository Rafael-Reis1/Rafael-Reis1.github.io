<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <meta name="description" content="App de gerenciamento de finan√ßas pessoais - Controle suas receitas e despesas">
    <title>Financeiro Pessoal</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Outfit:wght@400;500;600;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="style.css?v=1701260242">
    <link rel="icon" type="image/svg+xml" href="../favicon.svg?v=1701260242">

    <link rel="manifest" href="manifest.json?v=1701260242">
    <meta name="theme-color" content="#0f172a">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Finan√ßas">
    <link rel="apple-touch-icon" href="icon-maskable.png?v=1701260242">
    <meta name="mobile-web-app-capable" content="yes">
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <script src="https://cdn.jsdelivr.net/npm/flatpickr/dist/l10n/pt.js"></script>
    <script src="app.js?v=1701260242" defer></script>
</head>

<body>
    <div class="app-container">
        <header class="header">
            <div class="header-left">
                <a href="../index.html" class="btn-back" title="Voltar ao Portfolio">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M19 12H5M12 19l-7-7 7-7" />
                    </svg>
                </a>
                <h1>üí∞ Financeiro Pessoal</h1>
            </div>
            <div class="header-actions">
                <button id="installAppBtn" class="btn btn-icon btn-install" title="Instalar App" style="display: none;">
                    <svg width="20" height="20" viewBox="0 0 16 16" fill="currentColor">
                        <path
                            d="M4.406 1.342A5.53 5.53 0 0 1 8 0c2.69 0 4.923 2 5.166 4.579C14.758 4.804 16 6.137 16 7.773 16 9.648 14.545 11 12.68 11H10a.5.5 0 0 1 0-1h2.688C13.979 10 15 8.988 15 7.773c0-1.216-1.02-2.228-2.313-2.228h-.5v-.5C12.188 2.825 10.328 1 8 1a4.53 4.53 0 0 0-2.941 1.1c-.757.652-1.153 1.438-1.153 2.055v.448l-.445.049C2.064 4.805 1 5.952 1 7.318 1 8.785 2.23 10 3.781 10H6a.5.5 0 0 1 0 1H3.781C1.708 11 0 9.366 0 7.318c0-1.763 1.266-3.223 2.942-3.593.143-.863.698-1.723 1.464-2.383z" />
                        <path
                            d="M7.646 15.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 14.293V5.5a.5.5 0 0 0-1 0v8.793l-2.146-2.147a.5.5 0 0 0-.708.708l3 3z" />
                    </svg>
                    <span>Instalar App</span>
                </button>
                <button id="btnPrivacy" class="btn btn-icon" title="Modo Privacidade">
                    <svg id="privacyIconShow" width="20" height="20" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2">
                        <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                        <circle cx="12" cy="12" r="3"></circle>
                    </svg>
                    <svg id="privacyIconHide" width="20" height="20" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2" style="display: none;">
                        <path
                            d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24">
                        </path>
                        <line x1="1" y1="1" x2="23" y2="23"></line>
                    </svg>
                </button>
                <button id="btnLogin" class="btn btn-secondary" title="Login com Google" style="display: none;">
                    <svg width="18" height="18" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"
                        fill="currentColor">
                        <path
                            d="M12.48 10.92v3.28h7.84c-.24 1.84-.853 3.187-1.787 4.133-1.147 1.147-2.933 2.4-6.053 2.4-4.827 0-8.6-3.893-8.6-8.72s3.773-8.72 8.6-8.72c2.6 0 4.507 1.027 5.907 2.347l2.307-2.307C18.747 1.44 16.133 0 12.48 0 5.867 0 .533 5.347.533 12S5.867 24 12.48 24c3.44 0 6.013-1.133 8.013-3.227 2.04-2.053 2.627-5.067 2.627-7.427 0-.747-.054-1.467-.16-2.147H12.48z" />
                    </svg>
                    <span id="loginText">Google Login</span>
                </button>
                <div id="userInfo" class="user-info" style="display: none;">
                    <img id="userAvatar" src="" alt="User" class="user-avatar" title="Clique para op√ß√µes">
                    <div id="userDropdown" class="user-dropdown">
                        <div class="dropdown-header">
                            <span id="userName" class="user-name">Usu√°rio</span>
                            <span id="userEmail" class="user-email">email@exemplo.com</span>
                        </div>
                        <div class="dropdown-divider"></div>
                        <button id="btnExportMenu" class="dropdown-item">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2">
                                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                                <polyline points="7 10 12 15 17 10"></polyline>
                                <line x1="12" y1="15" x2="12" y2="3"></line>
                            </svg>
                            Exportar Backup
                        </button>
                        <button id="btnImportMenu" class="dropdown-item">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2">
                                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                                <polyline points="17 8 12 3 7 8"></polyline>
                                <line x1="12" y1="3" x2="12" y2="15"></line>
                            </svg>
                            Importar Backup
                        </button>
                        <button id="btnEmailToggle" class="dropdown-item">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2">
                                <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z">
                                </path>
                                <polyline points="22,6 12,13 2,6"></polyline>
                            </svg>
                            <span id="txtEmailToggle">Notifica√ß√µes Email</span>
                        </button>
                        <button id="btnSubscriptions" class="dropdown-item">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2">
                                <path d="M21 12V7H5a2 2 0 0 1 0-4h14v4"></path>
                                <path d="M3 5v14a2 2 0 0 0 2 2h16v-5"></path>
                                <path d="M18 12a2 2 0 0 0 0 4h4v-4Z"></path>
                            </svg>
                            Despesas Fixas
                        </button>
                        <div class="dropdown-divider"></div>
                        <button id="btnLogout" class="dropdown-item danger">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2">
                                <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
                                <polyline points="16 17 21 12 16 7"></polyline>
                                <line x1="21" y1="12" x2="9" y2="12"></line>
                            </svg>
                            Sair
                        </button>
                    </div>
                </div>
                <button id="btnImport" class="btn btn-secondary" title="Importar dados" style="display: none;">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" />
                        <polyline points="17 8 12 3 7 8" />
                        <line x1="12" y1="3" x2="12" y2="15" />
                    </svg>
                    <span>Importar</span>
                </button>
                <button id="btnExport" class="btn btn-secondary" title="Exportar dados" style="display: none;">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" />
                        <polyline points="7 10 12 15 17 10" />
                        <line x1="12" y1="15" x2="12" y2="3" />
                    </svg>
                    <span>Exportar</span>
                </button>
                <input type="file" id="fileInput" accept=".json" hidden>
            </div>
        </header>

        <main class="main-content">
            <section class="dashboard">
                <div class="card summary-card balance">
                    <div class="card-icon">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <rect x="2" y="4" width="20" height="16" rx="2" />
                            <path d="M12 12a3 3 0 1 0 0-6 3 3 0 0 0 0 6z" />
                            <path d="M2 10h2M20 10h2" />
                        </svg>
                    </div>
                    <div class="card-content">
                        <span class="card-label">Saldo Atual</span>
                        <span class="card-value" id="balanceValue">R$ 0,00</span>
                    </div>
                </div>
                <div class="card summary-card income">
                    <div class="card-icon">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <line x1="12" y1="19" x2="12" y2="5" />
                            <polyline points="5 12 12 5 19 12" />
                        </svg>
                    </div>
                    <div class="card-content">
                        <span class="card-label" id="incomeLabel">Receitas (m√™s)</span>
                        <span class="card-value" id="incomeValue">R$ 0,00</span>
                    </div>
                </div>
                <div class="card summary-card expense">
                    <div class="card-icon">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <line x1="12" y1="5" x2="12" y2="19" />
                            <polyline points="19 12 12 19 5 12" />
                        </svg>
                    </div>
                    <div class="card-content">
                        <span class="card-label" id="expenseLabel">Despesas (m√™s)</span>
                        <span class="card-value" id="expenseValue">R$ 0,00</span>
                    </div>
                </div>
                <div class="card summary-card future">
                    <div class="card-icon">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                            <line x1="16" y1="2" x2="16" y2="6"></line>
                            <line x1="8" y1="2" x2="8" y2="6"></line>
                            <line x1="3" y1="10" x2="21" y2="10"></line>
                        </svg>
                    </div>
                    <div class="card-content">
                        <span class="card-label">A Pagar (Futuro)</span>
                        <span class="card-value" id="futureValue">R$ 0,00</span>
                    </div>
                </div>
                <div class="card summary-card overdue" style="display: none;">
                    <div class="card-icon">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <circle cx="12" cy="12" r="10"></circle>
                            <line x1="12" y1="8" x2="12" y2="12"></line>
                            <line x1="12" y1="16" x2="12.01" y2="16"></line>
                        </svg>
                    </div>
                    <div class="card-content">
                        <span class="card-label">Contas Vencidas</span>
                        <span class="card-value" id="overdueValue">R$ 0,00</span>
                    </div>
                </div>
            </section>

            <div class="content-grid">
                <section class="card chart-section">
                    <h2 class="section-title">Despesas por Categoria</h2>
                    <div class="chart-container">
                        <canvas id="categoryChart"></canvas>
                        <p id="noChartData" class="no-data-message">Adicione despesas para ver o gr√°fico</p>
                    </div>
                </section>

                <section class="card chart-section">
                    <h2 class="section-title">Receitas por Categoria</h2>
                    <div class="chart-container">
                        <canvas id="incomeChart"></canvas>
                        <p id="noIncomeData" class="no-data-message">Adicione receitas para ver o gr√°fico</p>
                    </div>
                </section>
            </div>

            <section class="card transactions-section">
                <div class="section-header">
                    <div class="section-title-row">
                        <h2 class="section-title">Transa√ß√µes</h2>
                        <button id="btnAddTransaction" class="btn btn-primary">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2">
                                <line x1="12" y1="5" x2="12" y2="19" />
                                <line x1="5" y1="12" x2="19" y2="12" />
                            </svg>
                            <span>Adicionar</span>
                        </button>
                    </div>
                    <div class="filters">
                        <input type="text" id="searchInput" class="search-input" placeholder="üîç Pesquisar..."
                            autocomplete="off">
                        <button id="btnOpenFilters" class="btn btn-secondary" title="Filtros"
                            style="min-width: unset; padding: 0 1rem;">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2">
                                <polygon points="22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"></polygon>
                            </svg>
                        </button>
                    </div>
                </div>
                <div id="activeFilters" class="active-filters">
                </div>
                <div class="transactions-list" id="transactionsList">
                </div>

                <div id="paginationControls" class="pagination-controls" style="display: none;">
                    <button id="btnPrevPage" class="btn btn-secondary btn-sm" disabled>
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <polyline points="15 18 9 12 15 6"></polyline>
                        </svg>
                        Anterior
                    </button>
                    <span id="pageInfo" class="page-info">P√°gina 1</span>
                    <button id="btnNextPage" class="btn btn-secondary btn-sm">
                        Pr√≥ximo
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <polyline points="9 18 15 12 9 6"></polyline>
                        </svg>
                    </button>
                </div>

                <div id="noTransactions" class="empty-state" style="display: none;">
                    <h3>Nenhuma transa√ß√£o ainda</h3>
                    <p>Clique em "+ Nova Transa√ß√£o" para come√ßar a controlar seus gastos!</p>
                </div>
            </section>
        </main>
    </div>

    <div id="loginOverlay" class="login-overlay">
        <div class="login-card">
            <div id="authLoading" class="auth-loading">
                <div class="spinner"></div>
                <p>Carregando p√°gina...</p>
            </div>
            <div id="authContent" class="auth-content" style="display: none;">
                <div class="login-icon">
                    <svg width="60" height="60" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                        stroke-width="1.5">
                        <rect x="2" y="4" width="20" height="16" rx="2" />
                        <line x1="12" y1="16" x2="12" y2="12" />
                        <line x1="12" y1="8" x2="12.01" y2="8" />
                    </svg>
                </div>
                <h2>Bem-vindo ao Financeiro Pessoal</h2>
                <p>Para sincronizar seus dados em todos os dispositivos com seguran√ßa, √© necess√°rio fazer login com sua
                    conta Google.</p>
                <p class="login-note">Este aplicativo n√£o armazena dados locais para garantir que suas finan√ßas estejam
                    sempre atualizadas na nuvem.</p>
                <button id="btnLoginOverlay" class="btn btn-primary btn-lg">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                        <path
                            d="M12.48 10.92v3.28h7.84c-.24 1.84-.853 3.187-1.787 4.133-1.147 1.147-2.933 2.4-6.053 2.4-4.827 0-8.6-3.893-8.6-8.72s3.773-8.72 8.6-8.72c2.6 0 4.507 1.027 5.907 2.347l2.307-2.307C18.747 1.44 16.133 0 12.48 0 5.867 0 .533 5.347.533 12S5.867 24 12.48 24c3.44 0 6.013-1.133 8.013-3.227 2.04-2.053 2.627-5.067 2.627-7.427 0-.747-.054-1.467-.16-2.147H12.48z" />
                    </svg>
                    Fazer Login com Google
                </button>
                <a href="../index.html" class="btn btn-text-only"
                    style="color: var(--text-muted); text-decoration: none; font-size: 0.9rem;">
                    Voltar para o Portfolio
                </a>
            </div>
        </div>
    </div>

    <div id="editModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modalTitle">Nova Transa√ß√£o</h3>
                <button class="modal-close" id="closeEditModal">&times;</button>
            </div>
            <form id="editForm" autocomplete="off">
                <input type="hidden" id="editId">
                <div class="form-group">
                    <label for="editDescription">Descri√ß√£o</label>
                    <input type="text" id="editDescription" placeholder="Ex: Mercado, Aluguel, Sal√°rio..." required>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="editAmount">Valor (R$)</label>
                        <input type="text" id="editAmount" inputmode="numeric" placeholder="0,00" required>
                    </div>
                    <div class="input-group-split">
                        <div class="form-group">
                            <label for="editDate">Data</label>
                            <input type="date" id="editDate" placeholder="DD/MM/AAAA" required>
                        </div>
                        <div class="form-group checkbox-group">
                            <label class="spacer-label">Spacer</label>
                            <label class="custom-checkbox-container">
                                <input type="checkbox" id="isRecurring">
                                <span class="custom-checkmark"></span>
                                <span class="checkbox-label">Parcelar?</span>
                            </label>
                        </div>
                    </div>
                </div>

                <div id="recurringOptions" class="form-row" style="display: none;">
                    <div class="form-group full-width">
                        <label for="recurringInstallments">N√∫mero de Parcelas</label>
                        <input type="number" id="recurringInstallments" placeholder="Ex: 12" min="2">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="editType">Tipo</label>
                        <select id="editType" required>
                            <option value="expense">üí∏ Despesa</option>
                            <option value="income">üí∞ Receita</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="editCategory">Categoria</label>
                        <select id="editCategory" required>
                            <optgroup label="Despesas">
                                <option value="alimentacao">üçî Alimenta√ß√£o</option>
                                <option value="transporte">üöó Transporte</option>
                                <option value="moradia">üè† Moradia</option>
                                <option value="saude">üíä Sa√∫de</option>
                                <option value="educacao">üìö Educa√ß√£o</option>
                                <option value="lazer">üéÆ Lazer</option>
                                <option value="compras">üõí Compras</option>
                                <option value="servicos">üîß Servi√ßos</option>
                                <option value="outros_despesa">üì¶ Outros</option>
                            </optgroup>
                            <optgroup label="Receitas">
                                <option value="salario">üíµ Sal√°rio</option>
                                <option value="freelance">üíª Freelance</option>
                                <option value="investimentos">üìà Investimentos</option>
                                <option value="presente">üéÅ Presente</option>
                                <option value="outros_receita">üí∞ Outros</option>
                            </optgroup>
                        </select>
                    </div>
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn btn-secondary" id="cancelEdit">Cancelar</button>
                    <button type="submit" class="btn btn-primary">Salvar</button>
                </div>
            </form>
        </div>
    </div>

    <div id="filterModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Filtrar Transa√ß√µes</h3>
                <button class="modal-close" id="closeFilterModal">&times;</button>
            </div>
            <form id="filterForm">
                <div class="form-row">
                    <div class="form-group">
                        <label for="filterStartDate">Data In√≠cio</label>
                        <input type="date" id="filterStartDate" placeholder="DD/MM/AAAA">
                    </div>
                    <div class="form-group">
                        <label for="filterEndDate">Data Fim</label>
                        <input type="date" id="filterEndDate" placeholder="DD/MM/AAAA">
                    </div>
                </div>
                <div class="form-group">
                    <label for="filterType">Tipo</label>
                    <select id="filterType">
                        <option value="">üîç Todos os tipos</option>
                        <option value="income">üí∞ Receitas</option>
                        <option value="expense">üí∏ Despesas</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="filterCategory">Categoria</label>
                    <select id="filterCategory">
                        <option value="">üîç Todas as categorias</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="filterStatus">Status</label>
                    <select id="filterStatus">
                        <option value="">üîç Todos os status</option>
                        <option value="overdue">üö® Vencidas</option>
                        <option value="pending">üìÖ A Vencer</option>
                        <option value="paid">‚úÖ Pagas</option>
                    </select>
                </div>
                <div class="modal-actions">
                    <button type="button" id="btnClearFilters" class="btn btn-secondary">Limpar Tudo</button>
                    <button type="button" id="btnApplyFilters" class="btn btn-primary">Aplicar Filtros</button>
                </div>
            </form>
        </div>
    </div>

    <div id="deleteModal" class="modal">
        <div class="modal-content modal-small">
            <div class="modal-header">
                <h3>Confirmar Exclus√£o</h3>
                <button class="modal-close" id="closeDeleteModal">&times;</button>
            </div>
            <div class="modal-body">
                <p>Tem certeza que deseja excluir esta transa√ß√£o?</p>
                <p class="delete-info" id="deleteInfo"></p>
            </div>
            <div class="modal-actions" id="defaultDeleteActions">
                <button class="btn btn-secondary" id="cancelDelete">Cancelar</button>
                <button class="btn btn-danger" id="confirmDelete">Excluir</button>
            </div>
            <div class="modal-actions column" id="seriesDeleteActions" style="display: none;">
                <p>Esta transa√ß√£o tem parcelas:</p>
                <button class="btn btn-danger" id="deleteSingle">Excluir esta</button>
                <button class="btn btn-danger" id="deleteFuture">Desta em diante</button>
                <button class="btn btn-danger" id="deleteAll">Todas as parcelas</button>
                <button class="btn btn-secondary" id="cancelSeriesDelete">Cancelar</button>
            </div>
        </div>
    </div>

    <div id="seriesModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Detalhes das Parcelas</h3>
                <button class="modal-close" id="closeSeriesModal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="series-summary" id="seriesSummary"></div>
                <div class="series-list" id="seriesList">
                </div>
            </div>
        </div>
    </div>

    <div id="importModal" class="modal">
        <div class="modal-content modal-small">
            <div class="modal-header">
                <h3>Importar Dados</h3>
                <button class="modal-close" id="closeImportModal">&times;</button>
            </div>
            <div class="modal-body">
                <p>Escolha como importar os dados:</p>
            </div>
            <div class="modal-actions import-actions">
                <button class="btn btn-secondary" id="cancelImport">Cancelar</button>
                <button class="btn btn-primary" id="mergeImport">Mesclar Dados</button>
                <button class="btn btn-danger" id="replaceImport">Substituir Tudo</button>
            </div>
        </div>
    </div>

    <div id="cancelSubModal" class="modal">
        <div class="modal-content modal-small">
            <div class="modal-header">
                <h3>Cancelar Despesa Fixa</h3>
                <button class="modal-close" id="closeCancelSubModal">&times;</button>
            </div>
            <div class="modal-body">
                <p>Tem certeza que deseja cancelar esta despesa fixa?</p>
                <p class="delete-info" id="cancelSubInfo"></p>
            </div>
            <div class="modal-actions">
                <button class="btn btn-secondary" id="cancelSubNo">N√£o</button>
                <button class="btn btn-danger" id="cancelSubYes">Sim, Cancelar</button>
            </div>
        </div>
    </div>

    <div id="subsModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="subsModalTitle">Despesas Fixas</h3>
                <button class="modal-close" id="closeSubsModal">&times;</button>
            </div>

            <div id="subsListView">
                <div class="modal-body">
                    <div id="subsList" class="subs-list"></div>
                    <div id="noSubs" class="empty-state" style="display: none;">
                        <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="1.5">
                            <rect x="3" y="4" width="18" height="16" rx="2" />
                            <line x1="3" y1="10" x2="21" y2="10" />
                            <line x1="7" y1="15" x2="11" y2="15" />
                        </svg>
                        <p>Nenhuma despesa fixa cadastrada</p>
                        <span>Cadastre despesas recorrentes como Netflix, aluguel, internet...</span>
                    </div>
                </div>
                <div class="modal-actions" style="justify-content: space-between; align-items: center;">
                    <div class="total-display" style="display: flex; flex-direction: column; justify-content: center;">
                        <span class="label" style="font-size: 0.85rem; color: var(--text-secondary);">Total
                            Mensal:</span>
                        <strong class="value" id="subsTotalValue"
                            style="font-size: 1.1rem; color: var(--text-primary);">R$ 0,00</strong>
                    </div>
                    <div class="actions-buttons" style="display: flex; gap: 10px;">
                        <button type="button" class="btn btn-secondary" id="cancelSubs">Fechar</button>
                        <button type="button" class="btn btn-primary" id="btnAddSub">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2">
                                <line x1="12" y1="5" x2="12" y2="19"></line>
                                <line x1="5" y1="12" x2="19" y2="12"></line>
                            </svg>
                            Adicionar
                        </button>
                    </div>
                </div>
            </div>

            <div id="subsFormView" style="display: none;">
                <form id="subsForm" autocomplete="off">
                    <div class="form-group">
                        <label for="subsName">Nome</label>
                        <input type="text" id="subsName" placeholder="Ex: Netflix, Aluguel, Academia" required>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="subsAmount">Valor (R$)</label>
                            <input type="text" id="subsAmount" inputmode="numeric" placeholder="0,00" required>
                        </div>
                        <div class="form-group">
                            <label for="subsDay">Dia</label>
                            <input type="number" id="subsDay" min="1" max="31" placeholder="1-31" required>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="subsCategory">Categoria</label>
                        <select id="subsCategory" required>
                            <option value="alimentacao">üçî Alimenta√ß√£o</option>
                            <option value="transporte">üöó Transporte</option>
                            <option value="moradia">üè† Moradia</option>
                            <option value="saude">üíä Sa√∫de</option>
                            <option value="educacao">üìö Educa√ß√£o</option>
                            <option value="lazer" selected>üé¨ Lazer</option>
                            <option value="vestuario">üëï Vestu√°rio</option>
                            <option value="compras">üõí Compras</option>
                            <option value="servicos">üîß Servi√ßos</option>
                            <option value="outros">üì¶ Outros</option>
                        </select>
                    </div>
                    <input type="hidden" id="subsEditId" value="">
                    <div class="modal-actions">
                        <button type="button" class="btn btn-secondary" id="backToSubsList">Voltar</button>
                        <button type="submit" class="btn btn-primary" id="subsSubmitBtn">Adicionar</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <div id="deleteSubModal" class="modal">
        <div class="modal-content modal-tiny">
            <div class="modal-header">
                <h3>Excluir Assinatura</h3>
                <button class="modal-close" id="closeDeleteSubModal">&times;</button>
            </div>
            <div class="modal-body">
                <p>Tem certeza que deseja excluir permanentemente?</p>
                <div id="deleteSubInfo" class="delete-info"></div>
            </div>
            <div class="modal-actions">
                <button class="btn btn-secondary" id="cancelDeleteSub">Cancelar</button>
                <button class="btn btn-danger" id="confirmDeleteSub">Excluir</button>
            </div>
        </div>
    </div>

    <div id="unsubscribeModal" class="modal">
        <div class="modal-content modal-tiny">
            <div class="modal-header">
                <h3>Notifica√ß√µes Desativadas</h3>
                <button class="modal-close" id="closeUnsubscribeModal">&times;</button>
            </div>
            <div class="modal-body">
                <p>As notifica√ß√µes por e-mail foram desativadas com sucesso.</p>
                <p style="font-size: 0.9em; color: var(--text-secondary); margin-top: 8px;">Se quiser voltar a receber,
                    voc√™ pode reativar a qualquer momento no menu do seu perfil.</p>
            </div>
            <div class="modal-actions">
                <button class="btn btn-primary" id="confirmUnsubscribe" style="width: 100%;">Entendi</button>
            </div>
        </div>
    </div>

    <div id="toast" class="toast"></div>

    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('sw.js');
            });
        }
    </script>
</body>

</html>